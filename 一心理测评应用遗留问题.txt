

一、公共配置信息
(1).外网域名申请
(2).服务号
  1.申请并配置开发账户方便调试  正式账号的appid、appsecret、商户号、openid
	2.配置 JS接口安全域名 
	3.配置 网页授权回调域名 即用户点击网址获取用户信息后打开哪个域名
(3).服务号接入支付 https://pay.weixin.qq.com/static/applyment_guide/applyment_detail_public.shtml
(4).应用入口 2种方式
   1.已关注服务号内推送h5的网页链接 
	 2.未关注服务号直接访问h5分享网页链接
		  网页授权分为两种：
			   静默 (基本授权 snsapi_base)
			   需要手动点击 (高级授权 snsapi_userinfo)
			已授权过 第二次访问会提示近期已关注
			未授权过 需要手动点击授权
 (5).认证服务号和未认证的服务号的区别：
		1、认证的服务号有微信公众平台官方的认证标识，而没有认证的公众账号没有；
		2、认证的服务号可以开通微信多客服，而没有认证的公众账号没有；
		3、认证的服务号可以在自定义菜单里直接放外网的链接，而没有认证的公众账号不可以；
    4、认证的服务号有微信最新开发的JS-SDK微信分享接口，而没有认证的公众账号没有；
    5、认证的服务号可以申请微信支付和微信高级接口授权，这是其他任何公众账号都不具备的功能；
    6、其他方面，认证的服务号和没有认证的服务号基本是一致的，比如每月可以群发4条消息等。
		7、测试号是不具备支付接口的能力，所以想要在测试环境测试微信公众号支付，就必须使用正式账号的appid、key、商户号以及open id

二、h5
	(1).测评介绍页
		  1.顶部banner接口 需要从微信接口获取注册过的用户头像
			2.页面内的段落和图片都需要接口提供 
			3.图片尽可能的小 影响渲染
			4.支付按钮
			  1.页面的微信JSSDK的配置参数以及签名使用的appid要使用认证正式号的appid（测试公众号是未认证的）
				2.调用微信统一下单接口的app id、商户号、key以及open id需要使用正式号的
			
  (2).测评准备页
	    1.信息需要接口提供
	(3).测评进行中
	    1.右上角 ？提示信息没有提供
	(4).测试完成弹窗页
	    1.信息需要接口提供
	(5).报告展示页
	    1.信息需要接口提供
	(6).用户评价页
	    1.第一次评论提交后跳转至分享页
			2.第二次显示去分享按钮进入分享页
	(7).用户分享页
      1.分享到朋友圈  调用微信分享给朋友圈接口
			2.分享给朋友  调用微信分享给朋友接口
			3.分享出去的链接都是首页的链接
			4.页面需要设计一下
			5.{
				title: '测试标题', // 分享标题
				imgUrl: 'http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqfnf9LqWC9KpLX3qiaLZI3nAajepAVJFcLGiaDtnlbEGLCjCiccZP0LBicLRZgWHxGUMGwr1WRgccuVA/132', // 分享图标
				link: link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
				desc: '快来试试吧' //分享描述
			};
			6.分享目前接口调用成功 
				1.由于是测试公众号看不到具体效果
				2.页面的微信JSSDK的配置参数以及签名使用的appid要使用认证正式号的appid（测试公众号是未认证的）
			
	(8).所有页面上非微信用户头像之外的图片存在何处  图片域名访问等
	
	(9).页面未实现埋点接口
			1.测评介绍页：pv、uv   接口/introducePage/getIntroducePage
			2.“立即购买”按钮点击量  接口/questions/getUserPayAmount
			3.“成功支付”订单量     接口/order/success                   未提供
			4.分享人数            接口/questions/userShare
			5.评价内容存储         接口/userComment/saveUserComment

三、node  
    (1).登录流程
	    1.已登录 直接跳转 
			2.未登录 走网页授权流程
				 1.网页授权 
					 获取code 
					 获取网页access_token
				 2.基础授权
					 获取基础access_token
				 3.获取jsapi_ticket权限签名（微信提供的sign标准签名）
				 4.将以上信息保存到redis
			3.目前获取code回调时本地静态服务时有跨域问题，待部署到node服务器中此问题应该可以解决
		(2).所有请求添加访问日志和异常日志
		(3).h5页面所有请求都会通过node

四、java
  (1).服务号需要推送消息
	(2).获取access_token 服务号内登录状态 
	(3).所有接口访问有频次限制 2000次 网页端接口访问频次没有限制


五、部署服务器
 (1).安装node 和 npm 并配置NODE_ENV=production
 (2).安装node pm2进程管理器
 (3).安装redis 并配置账户信息
 (4).安装nginx 源码安装 
    1.启动nginx 80端口服务
		2.配置反向代理  
		  location  /java  代理到java服务
			location  /node  代理到node服务
    3.nginx静态资源缓存
		  需要将前端的静态资源缓存在ngnix服务器
			gzip压缩
 (5).部署前端node项目到服务器